!function(t){t.fn.jzoom=function(i){return this.each(function(){function e(i,e){var o=n.find("img").attr("src");i=i||"_big";var h=o.lastIndexOf(".");e=e||o.substring(h+1);var s=o.substring(0,h)+i+"."+e,r=t("<img>").attr("src",s).css("position","absolute");return r}function o(){n.append(a).append(c);var t=f.width()/n.width(),i=f.height()/n.height();a.css({width:c.width()/t+"px",height:c.height()/i+"px"}),g=n.width()-a.outerWidth(),u=n.height()-a.outerHeight(),v=(f.width()-c.width())/g,w=(f.height()-c.height())/u}function h(t,i,e,o){var h,s=t-i-e/2;return h=s>=0&&o>=s?s:0>s?0:o}var s={width:400,height:400,position:"right",offsetX:20,offsetY:0,opacity:.6,bgColor:"#fff",loading:"Loading..."};i=t.extend(!0,s,i);var n=t(this),r=n.css("position");"static"===r&&n.css("position","relative"),n.find("img").css({width:n.width()+"px",height:n.height()+"px"});var a=t("<div></div>");a.css({position:"absolute",zIndex:"990",opacity:s.opacity,cursor:"move",border:"1px solid #ccc",backgroundColor:s.bgColor});var d,p,c=t("<div></div>");switch(s.position){case"top":d=0,p=-s.height-s.offsetY;break;case"right":d=n.width()+s.offsetX,p=0;break;case"bottom":d=0,p=n.height()+s.offsetY;break;case"left":d=-s.width-s.offsetX,p=0}c.css({left:d+"px",top:p+"px",width:s.width+"px",height:s.height+"px",position:"absolute",zIndex:"999",overflow:"hidden",border:"1px solid #ccc",fontSize:"20px",textAlign:"center",lineHeight:s.height+"px"});var f=e(s.suffixName,s.imgType);c.append(f).append(s.loading);var g,u,x,l,v,w,b=0,m=n.offset();return n.mouseenter(function(){a.show(),c.show(),0===b&&(o(),b++)}).mousemove(function(t){x=h(t.pageX,m.left,a.width(),g),l=h(t.pageY,m.top,a.height(),u),a.css({left:x+"px",top:l+"px"}),f.css({left:-x*v+"px",top:-l*w+"px"})}).mouseleave(function(){a.hide(),c.hide()}),this})}}(jQuery);